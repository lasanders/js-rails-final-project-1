<div>
    <h1>Candies</h1>
    <div id="sourCandies">
      <h2>Sour Candies</h2>
    </div>
  
    <div id="sweetCandies">
      <h2>Sweet Candies</h2>
    </div>
</div>


    <h2>Sweet Candies</h2>
    <% Candy.sweet.each do |candy| %>
        <% if current_user.employee %>
            <li><%= link_to "#{candy.name} Details", candy_path(candy) %> <%= candy.count %> <%= " #{candy.name} available for purchase" %></li><br>
        <% else %>
          <li><%= link_to "Purchase #{candy.name}", candy_path(candy) %> <%= candy.count %> <%= " #{candy.name} available for purchase" %></li><br>
        <% end %>
    <% end %>
   <br></br>



<script type="text/javascript" charset="utf-8">
class Candy {
  constructor({name, taste, appetite, cost, count}) {
    this.name = name
    this.taste = taste
    this.appetite = appetite
    this.cost = cost
    this.count = count
  }
  formatHTML(){}
}
  
function postCandies() {

    $.get("/candies/", function(candies) {
    

    candies.forEach(candy => {
    
      $("#" + candy.taste + "Candies").append("<a href='/candies/" + candy.id + "'>" + candy.name + "</a>");
      $("#" + candy.taste + "Candies").append("<p>" + candy.taste + "</p>");
      $("#" + candy.taste + "Candies").append("<p>" + candy.appetite + "</p>");
      $("#" + candy.taste + "Candies").append("<p>" + candy.cost + "</p>");
      $("#" + candy.taste + "Candies").append("<p>" + candy.count + "</p>");
      debugger

    })
  });
};

postCandies();
</script>

<% if current_user.employee %>

  <%= link_to 'New Candy', new_candy_path %>
    <% end %>
  <%= link_to 'Log Out', signout_path%>
